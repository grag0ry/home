#!/bin/bash

set -eE -u -o pipefail

branches() {
    git branch -a \
        | sed -n \
            -e 's/^\s*\|\s*$//g' \
            -e 's/^\*\s\+//' \
            -e 's,^\s*remotes/[^/]\+/,,' \
            -e '/^HEAD/b' \
            -e p \
        | sort -u
}

tags() { git tag | sed -e s,^,tags/, | sort -u; }

branch=$({ branches; tags; }| fzf)
exec git checkout "$branch"
